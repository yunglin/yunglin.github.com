<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>碎碎念</title>
  <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://blog.yunglinho.com/">
  <link rel="alternate" type="application/rss+xml" title="碎碎念" href="https://blog.yunglinho.com/feed.xml">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-11857878-6']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>



</head>

  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">碎碎念</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/archives/">Archives</a>
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="/page2/">Posts - page 2</a>
          
        
          
          <a class="page-link" href="/page3/">Posts - page 3</a>
          
        
          
          <a class="page-link" href="/page4/">Posts - page 4</a>
          
        
          
          <a class="page-link" href="/page5/">Posts - page 5</a>
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="home">

    <h1 class="page-heading">Posts</h1>

    <div class="post-list">
        
        <div>
            <h1>
                <a class="post-title" href="/blog/2020/08/04/civil-war-ii/">美國內戰</a>
            </h1>
            <span class="post-meta">Aug 4, 2020</span>
            <div class="post-content">
                <p>臉書上的好友，不少都知道我最近三四個月，都不務正業，那我在幹麻呢？在為美國打內戰做準備。</p>

<p>那美國內戰是怎麼打起來的呢？</p>

<p>情節一：</p>

<blockquote>
<ol>
<li>11/3當晚川普票面領先。川普在 mail-in ballot數完前宣布勝利，拜登則是不同意。</li>
<li>之後幾天，mail-in ballot進來，川普被逆轉，拜登宣布勝利。</li>
<li>川普打官司挑戰mail-in ballot的真實性。</li>
<li>拜登開始任命新內閣班子。</li>
<li>川普 1/20 日拒絕離開白宮，拜登在紐約宣誓就職，成為繼華盛頓之後第二個在曼哈頓就職的總統。</li>
<li>拜登任命的司法部官員赴各地上班，接管local FBI和US attorney office, 在藍州順利接班，而在紅州被亂棍打出。</li>
<li>軍方宣布不介入川拜之爭, 不服從川普防長和拜登防長的任何命令。</li>
</ol>
</blockquote>

<p>情節二：</p>

<blockquote>
<p>有幾個州已經州議會投票通過，要把選舉人票投給全國選票領先的候選人，而不是當州領先的候選人。如果藍州如加州，反對黨根本懶得去投票，也不清楚有其他州修改了遊戲規則，就真的沒去投。最後川普總票數輸了，雖然照舊制會拿下選舉人票數獲勝，但是照新制，因為輸了總票數，所以有些搖擺州雖然是川普得票領先但是選舉人票還是都給了拜登，最後照新制是拜登當選</p>

<p>註：<del><a href="https://www.cnn.com/2020/02/12/politics/va-house-electoral-college-popular-vote/index.html">維吉尼亞州議會投票通過，把選舉人票投給全國得票領先的候選人</a>，維吉尼亞是搖擺州，最近民主黨拿下多數席位，不知道什麼時候再會丟掉多數席位，稱民主黨是多數時，通過這種方案，想辦法把維吉尼亞的選舉人票綁住。</del></p>

<p>08/05 註二：上述法案被參議員擱置，明年才會審。</p>
</blockquote>

<del>恐怖故事說到這邊，請問有幾個人知道，美國已經改了選制的？如果開完了票，選民才發現原來選制改了，選輸的選民能服氣嗎？</del>

<p>這兩個狀況不是我說說而已，情節一是民主黨跟共和黨內反川派推演出來的，情節二是民主黨內推動改選制推演出來的，兩者的發生的可能性都很高。</p>

            </div>

        </div>
        
        <div>
            <h1>
                <a class="post-title" href="/blog/2020/07/30/pateron/">Pateron</a>
            </h1>
            <span class="post-meta">Jul 30, 2020</span>
            <div class="post-content">
                <p>這個事件太有趣了，我解釋清楚一些</p>

<p>Patreon是個類似Youtube的付費平台，可以讓內容供應商在上面刊登付費的影片，或者是訂購贊助。</p>

<p>Patreon的使用者合約上寫到，使用者如果跟平台有爭執時，需要通過加州的仲裁機構來仲裁。</p>

<p>然後加州有個特別的規定，仲裁的費用，需要由被告的人負擔，這算是保障消費者的一環。</p>

<p>前一段時間 Patreon 把許多保守派的內容主提出平台，本來是內容主們告 Patreon ，但不知道那個天才發現使用者合約的漏洞，要求粉絲去告 Patreon ，然後有上千個粉碎加入，因為一個仲裁的費用是上萬塊美金，上千個粉絲去告，就要上千萬美金，現在 Patreon 無力負擔這筆費用，只要靠仲裁，不用開打，就可以弄到 Patreon 破產</p>

<p>Patreon 發現出問題後，修改使用者合約，並上法院要求使用新合約時，被法官罵，你要不要臉，使用者合約是你們寫的，遊戲規則是你自己定的，怎麼可以臨時改遊戲規則</p>

<p>在美國開公司，好的律師帶你上天堂，糟的律師讓你下地獄，連官司都不用開打，公司就要倒了</p>

<iframe src="https://www.facebook.com/plugins/post.php?href=https%3A%2F%2Fwww.facebook.com%2Felderengineer%2Fposts%2F1798558840287255&width=500" width="500" height="801" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowTransparency="true" allow="encrypted-media"></iframe>

            </div>

        </div>
        
        <div>
            <h1>
                <a class="post-title" href="/blog/2020/02/29/mature-tech/">技術是熟的好</a>
            </h1>
            <span class="post-meta">Feb 29, 2020</span>
            <div class="post-content">
                <p>工作半年的新工作用的技術是 Actor Model ，我老是被公司的 CTO 說我是 Java 背景的老古板。 Actor Model 越用我越不覺的他有比 shared memory 好到哪裡去。</p>

<p>shared memory concurrency 像是在玩火，我玩火玩十幾年了，早就知道怎麼樣不會被火燒到。</p>

<p>Actor Model 是在玩線程，每天都在看到底同一個 actor 要開多少個要給多少線程， actor 開少了，機器再快效率也不會變好，到最後變成在玩自己，每幾天就有人被 akka 整到，玩線程玩到被吊起來。</p>

<p>程式就是這樣，用上手就好，反正到最後分高下的，大多是對工具的熟悉的。</p>

<p>最近真的體會到為什麼老少工程師會處不來了，上面的例子是一個，還有像是資料庫的選用， NoSQL推行十幾年後，現在的年輕人要用資料庫就是 NoSQL 中選一個，沒人要用 SQL ，要寫測試，還不准我用通用的 SQL 來建假資料，一定要用的難看的 slick DSL ，這世界真的反了。</p>

<p>結論就是，大多數人就是把二十多歲前接觸的世界當常態，然後用一輩子在這個時間凍結的世界內，最佳化自己的生活方式。</p>

<p>好啦，有用老頭技術的小公司可以來找我談談了，我年紀大了，跟新技術處不來了</p>

            </div>

        </div>
        
        <div>
            <h1>
                <a class="post-title" href="/blog/2019/10/25/enable-letsencrypt-on-wordpress-and-synology/">Synology上設定 wordpress & let'sencrypt 的方法</a>
            </h1>
            <span class="post-meta">Oct 25, 2019</span>
            <div class="post-content">
                <!-- wp:paragraph -->

<p>快被 Synology 跟 Comcast 整慘了，正常運作的網站，突然有一天，因為 HTTPS Certificate 的原故連不上了，被整了好幾個小時，所以還是記下怎麼處理好的。<br><br>在 Synology DSM 6.3 上面要正常跑 wordpress &amp; nginx &amp; let's encrypt 的話</p>

<!-- /wp:paragraph -->

<!-- wp:list -->

<ul><li>先安裝 PHP 7.3 ，然後在 Web Station 中新增 PHP 7.3 ，記得要勾選 curl &amp; mysqli extension</li><li>在 wordpress virtualhost 的設定中選用 nginx &amp; php 7.3</li><li>然後到 Control Panel -&gt; Security -&gt; Certificate 的地方新增 Certificate from let's encrypt.</li></ul>

<!-- /wp:list -->

<!-- wp:paragraph -->

<p>如果新增失敗的話，用 ssh 登入，然後跑下面的指令</p>

<!-- /wp:paragraph -->

<!-- wp:quote -->

<blockquote class="wp-block-quote"><p>sudo /usr/syno/sbin/syno-letsencrypt new-cert -d &lt;host&gt; -m &lt;email&gt; -v</p></blockquote>

<!-- /wp:quote -->

<!-- wp:paragraph -->

<p>這樣子會吐出一堆 let's encrypt 給的 debug urls ，把 url 點開，就可以看是那邊出錯了。</p>

<!-- /wp:paragraph -->

            </div>

        </div>
        
        <div>
            <h1>
                <a class="post-title" href="/blog/2019/06/19/anti-aging/">如何對抗老化</a>
            </h1>
            <span class="post-meta">Jun 19, 2019</span>
            <div class="post-content">
                <iframe width="560" height="315" src="https://www.youtube.com/embed/75doh5hJVRI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<!-- wp:paragraph -->

<p></p>

<!-- /wp:paragraph -->

<!-- wp:list {"ordered":true} -->

<ol><li>何時進食比吃了什麼重要，採用日間的斷食療法</li><li>分子化學已經找出來斷食療法的關鍵酮</li><li><a href="https://nutritionreview.org/2019/05/fasting-molecule-exerts-anti-aging-effects-to-protect-vascular-system/">https://nutritionreview.org/2019/05/fasting-molecule-exerts-anti-aging-effects-to-protect-vascular-system/</a></li><li>運動及酮療法，可以讓老鼠活更久，兩者都使用的話活的更久。</li><li>科學家在20年前就找到能夠讓老鼠或稻穀活更久(5~20%)的基因</li><li>大部份研究抗老化的科學家都有服用 nmn <br><a href="https://drjohnday.com/6-foods-to-reverse-aging-with-nmn/">https://drjohnday.com/6-foods-to-reverse-aging-with-nmn/</a></li><li>作者還有服用 Resveratrol&nbsp;及 1g Metformin ，後者是糖尿病用藥，但是作者沒有糖尿病</li><li>AMPK Sirtuins mTOR 是老化的三條路，前兩者有低風險的藥物可使用（前述的藥物）</li><li>洗三溫暖，冷熱交替也可以抗老化</li><li>低糖低碳飲食</li><li>少吃紅肉，紅肉含 amino acid 會觸發 mTOR</li><li>branch chain amino acid 對運動的表現有幫助，但作者認為長期會導至老化</li></ol>

<!-- /wp:list -->

            </div>

        </div>
        
        <div>
            <h1>
                <a class="post-title" href="/blog/2019/05/21/raising-a-bilingual-child/">typelevel cats 學習筆記</a>
            </h1>
            <span class="post-meta">May 21, 2019</span>
            <div class="post-content">
                <p>推薦一本書 <a href="https://www.amazon.com/gp/product/1400023343/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1400023343&amp;linkCode=as2&amp;tag=murmur-20&amp;linkId=1a603b4fbc610f89405a59009c166151">Raising a Bilingual Child</a> ，相對於訪間口耳相傳的八卦，本書是由學者寫成，引用美國數個研究單位的研究成果，來告訴大家如何教養出雙語的兒童。</p>

<p>書中主要引用的研究資料是來自佛羅里達，因為佛州有眾多的西語系移民，家庭的社經環境各種都有，所以在統計上去掉一些其它因素的造成的誤差。</p>

<p>我讀到目前讀到比較有用的有幾點：</p>

<p>五歲以下的移民，在上 K5 前，若是只用母語，並不會影響未來的英語學習，反過來，若是在上 K5 前就開始學習雙語，只有 20% 的小孩未來還能學好母語，某一天就會轉成用英語為主。</p>

<p>母語的學習，並不會影響到英語的學習成果，既使是五歲才開始學習英文，到十一歲後，就在統計上看不出來英語學習的差易。</p>

<p>如果要學習好母語，除了日常對話外，還是要增加字彙的種類，雙語學校(immersion school)的教學就很有幫助。</p>

<p>以高中及大學 GPA 來看，雙語的學生表現跟英語的學生一樣好。但是很不幸的是， SAT 的測驗中，雙語的學生會比英語的學生低 50 分，這是未來 SAT 要努力的方向，為什麼測驗沒有鑑別能力。</p>

            </div>

        </div>
        
        <div>
            <h1>
                <a class="post-title" href="/blog/2019/05/11/typelevel-cats/">typelevel cats 學習筆記</a>
            </h1>
            <span class="post-meta">May 11, 2019</span>
            <div class="post-content">
                <p>最近在學 typelevel/cats 底下這一行程式碼，想了兩天才理解為什麼要寫成這樣，Functional Programming真的是太困難了，有點回到大一學遞迴的感覺。</p>

<p><img src="/images/2019-05/IO-async.png"  ></p>

<p><code>(Either[Throwable, A]) =&gt; Unit)</code> 是一個 Callback function / Listener interface ， <code>(CB =&gt; Unit)</code> 表示這個 Callback function 可以在不同的 Thread 執行。</p>

<p>為什麼要寫成這樣？我還在想….</p>

            </div>

        </div>
        
        <div>
            <h1>
                <a class="post-title" href="/blog/2019/03/02/platform-and-diminishing-returns/">谷歌、臉書大當機</a>
            </h1>
            <span class="post-meta">Mar 2, 2019</span>
            <div class="post-content">
                <p>接連兩天谷歌、臉書大當機，稱機會講一下我淺到不能再淺的淺見。</p>

<p>矽谷這邊的公司很喜歡講平台化、雲端化、大數據，把不管是企業內部還是外部，四散的資料集中管理，本來每一間私人公司都要請個 MIS，專職備份管理企業資料，等到雲端化自動化後，一個人可以管一千個企業的資料庫，可以利用經濟規模降低成本。</p>

<p>但是經濟規模可以一直無上限下去嗎？有種東西叫邊際效用遞減，等到規模大了後，自然有規模大的問題，像是領英堅持整間公司共用同一個hadoop cluster，光Gossip Protocol的口水就可以淹死你，不能再加機器，所以做了個”大象醫生”出來看有沒有人濫用資源。所有人要共用一個 git server ，結果當然是撐不下去，所以弄了個 git master-slave 的架構出來，偶爾 build system 拉到的資料不是最新版而已。</p>

<p>平台化可以達到經濟規模是正確的，但是問題的複雜度也會一直上昇，所以這些平台公司請一堆業界頂尖的人來解問題，可是業務量有可能一不小心就超過系統原始設計的上限，在新解法出來前，就只能請客戶多擔待些了。</p>

            </div>

        </div>
        
        <div>
            <h1>
                <a class="post-title" href="/blog/2019/03/01/bliz-product/">閃電式開發</a>
            </h1>
            <span class="post-meta">Mar 1, 2019</span>
            <div class="post-content">
                <p>xdite 的新書&lt;閃電式開發&gt;寫的真好，如果能早點出就好了，我在 2010年就走過這條錯路，東西做出來的金流串好了，然後上線就傻了，不知道客戶在那裡，一直到後來加入飛向後才知道，創業是怎麼回事，不過白花的兩年歲月是要不回來了…</p>

<p>https://github.com/xdite/blitz-product/blob/master/04.md</p>

<p><img src="/images/2019-03/quote.png"  ></p>

            </div>

        </div>
        
        <div>
            <h1>
                <a class="post-title" href="/blog/2019/02/25/saga-pattern-with-workflow-engine/">使用 Workflow Engine 來實作 Microservices SAGA pattern</a>
            </h1>
            <span class="post-meta">Feb 25, 2019</span>
            <div class="post-content">
                <p>最近離開了領英，比較有空閒讀讀書，想想到底之前在實作上出了那些的問題，跟要怎麼處理這些問題。</p>

<p>先推薦兩本書 <a href="https://amzn.to/2H2g8y3">SOA Patterns</a> 和 <a href="https://amzn.to/2Sr593b">Microservices Patterns</a> ，這兩本書都有提到怎麼在微服務下處理 transaction 的方式，兩本書的方法都是 <a href="https://microservices.io/patterns/data/saga.html">SAGA pattern</a> + CQRS + idempotent 。</p>

<p>但是如果你有實作過 SAGA Pattern 的話，就會知道使用 Message Driven 的方式在兩個微服務間溝通的話，整個程式碼的可讀性會非常的低，除了原先溝通並實做細節的兩位工程師外，大概不會有第三個人能夠理解整個交易是怎麼完成的。</p>

<p><img src="/images/2019-02-05/Saga_Choreography_Flow.001.jpeg"  >
註：本文圖片取自 https://microservices.io/patterns/data/saga.html</p>

<p>在實作細節上，使用MDA的架構，微服務要提供sync &amp; async API使用，是額外的成本，在領英，所有的微服務預設都是只有提供 sync API 的，你要請對方多開一個 async 的界面，是要求爺爺告奶奶的。</p>

<p>因此，在技術上管理上比較可行的，就是把流程的管理都拉到自己管理的微服務當中，在裡面使用 orchestrator 來管理對外乎叫的狀態記錄處理跟錯誤重送。</p>

<p><img src="/images/2019-02-05/Saga_Orchestration_Flow.002.jpeg"  ></p>

<p>當然，這又免不了要寫一大堆 glue code 把所有的東西黏在一起，然後在資料褲裡面又要開一堆的 Table 來記錄運行的狀況，這非常的花功夫，在實作上很花時間又不好進行修改沒有彈性。</p>

<p>今天早上看到 InfoQ 的一則新聞 <a href="https://www.infoq.com/news/2019/02/migrate-microservices-workflows">Experiences Moving from Microservices to Workflows at Jet.com</a> 突然腦洞大開，是啊 orchestrator saga 可以使用如 Apache Camel 等的 workflow engine 來實作，微服務還是只需要提供 sync API ，交由 workflow engine 來做狀態追蹤跟錯務重送，然後中間的狀態，可以透過 Camel 存在 ActiveMQ 之中，然後整個流程的定義，可以透過 Camel Java/Scala/… DSL 高階語言來編寫，整個可讀性大增。</p>
<div class="highlight"><pre><code class="language-" data-lang="">  from("file:src/data?noop=true")
      .choice()
          .when(xpath("/person/city = 'London'"))
              .to("file:target/messages/uk")
          .otherwise()
              .to("file:target/messages/others");
</code></pre></div>
<p>原來我在 2014 年左右就找到答案並且在飛向的程式碼中實作過，只是這幾年我自己被領英的專案壓力追著跑（每一季都同時跑五個以上專案），忙到忘掉了。</p>

            </div>

        </div>
        
    </div>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">碎碎念</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>碎碎念</li>
          <li><a href="mailto:yunglin at gmail.com">yunglin at gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/yunglin"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">yunglin</span></a>

          </li>
          

          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p class="rss-subscribe">subscribe <a href="https://feeds.feedburner.com/yunglinho">via RSS</a></p>
      </div>


    </div>

  </div>

</footer>

    <div id="fb-root"></div> <script>(function(d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.0"; fjs.parentNode.insertBefore(js, fjs); }(document, 'script', 'facebook-jssdk'));</script>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
  </body>

</html>
